<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entrenador de Tiempos Pasados - Espa√±ol</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary-color: #059669;
            --accent-color: #dc2626;
            --background-color: #f8fafc;
            --surface-color: #ffffff;
            --text-color: #1f2937;
            --text-light: #6b7280;
            --border-color: #e5e7eb;
            --success-color: #10b981;
            --error-color: #ef4444;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --transition-fast: 0.15s ease-out;
            --transition-base: 0.3s ease-out;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            font-size: var(--font-size-base);
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .app-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: var(--spacing-sm) var(--spacing-sm);
            text-align: center;
            box-shadow: var(--shadow-md);
        }

        .app-header h1 {
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: 0;
        }

        .app-header .subtitle {
            display: none;
        }

        .app-main {
            flex: 1;
            padding: var(--spacing-md) var(--spacing-sm);
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-xs);
            margin-bottom: var(--spacing-sm);
            flex-shrink: 0;
        }

        .card {
            background: var(--surface-color);
            border-radius: 6px;
            padding: var(--spacing-xs);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
        }

        .card h3 {
            font-size: var(--font-size-sm);
            margin-bottom: var(--spacing-xs);
            font-weight: 600;
        }

        .exercise-container {
            background: var(--surface-color);
            border-radius: 12px;
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            max-width: 800px;
            margin: 0 auto;
            flex: 1;
            overflow-y: auto;
        }

        .exercise-header {
            margin-bottom: var(--spacing-md);
        }

        .exercise-type {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-sm);
        }

        .type-badge {
            background: var(--primary-color);
            color: white;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 20px;
            font-size: var(--font-size-sm);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .difficulty {
            font-size: var(--font-size-sm);
            font-weight: 500;
        }

        .question-section {
            margin-bottom: var(--spacing-lg);
            text-align: center;
        }

        .question-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: var(--spacing-sm);
        }

        .question-text {
            font-size: var(--font-size-base);
            line-height: 1.6;
            color: var(--text-color);
            background: var(--background-color);
            padding: var(--spacing-md);
            border-radius: 8px;
            border: 2px solid var(--border-color);
            margin-bottom: var(--spacing-sm);
        }

        .options-section {
            display: grid;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
        }

        .option-button {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-md);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--surface-color);
            cursor: pointer;
            transition: all var(--transition-base);
            font-size: var(--font-size-base);
            text-align: left;
        }

        .option-button:hover {
            border-color: var(--primary-color);
            background: #f8fafc;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .option-button.selected {
            border-color: var(--primary-color);
            background: #eff6ff;
        }

        .option-button.correct {
            border-color: var(--success-color);
            background: #f0fdf4;
            color: var(--success-color);
        }

        .option-button.incorrect {
            border-color: var(--error-color);
            background: #fef2f2;
            color: var(--error-color);
        }

        .option-letter {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            font-weight: 600;
            font-size: var(--font-size-sm);
            flex-shrink: 0;
        }

        .option-button.correct .option-letter {
            background: var(--success-color);
        }

        .option-button.incorrect .option-letter {
            background: var(--error-color);
        }

        .option-text {
            flex: 1;
            font-weight: 500;
        }

        .result-section {
            padding: var(--spacing-md);
            border-radius: 8px;
            margin-bottom: var(--spacing-md);
            display: flex;
            gap: var(--spacing-md);
            align-items: flex-start;
        }

        .result-section.correct {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 2px solid var(--success-color);
        }

        .result-section.incorrect {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            border: 2px solid var(--error-color);
        }

        .result-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .result-content {
            flex: 1;
        }

        .result-title {
            font-size: var(--font-size-lg);
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
        }

        .result-section.correct .result-title {
            color: var(--success-color);
        }

        .result-section.incorrect .result-title {
            color: var(--error-color);
        }

        .result-explanation {
            font-size: var(--font-size-sm);
            line-height: 1.5;
            margin-bottom: var(--spacing-sm);
        }

        .tip {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 6px;
            padding: var(--spacing-sm);
            border-left: 3px solid #f59e0b;
        }

        .tip-label {
            font-weight: 600;
            color: #92400e;
            margin-bottom: var(--spacing-xs);
            font-size: var(--font-size-sm);
        }

        .tip-text {
            color: #92400e;
            margin: 0;
            font-size: var(--font-size-sm);
        }

        .progress-stats {
            text-align: center;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: var(--font-size-lg);
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1;
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .streak-display {
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-xs);
        }

        .streak-number {
            font-size: var(--font-size-lg);
            font-weight: 700;
            color: var(--text-color);
        }

        .streak-label {
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .app-footer {
            display: none;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            color: var(--text-light);
        }

        @media (max-width: 768px) {
            .app-header {
                padding: var(--spacing-xs) var(--spacing-sm);
            }

            .app-header h1 {
                font-size: var(--font-size-base);
            }

            .app-main {
                padding: var(--spacing-xs);
            }

            .dashboard {
                grid-template-columns: 1fr 1fr;
                gap: var(--spacing-xs);
                margin-bottom: var(--spacing-xs);
            }

            .card {
                padding: var(--spacing-xs);
            }

            .card h3 {
                font-size: 0.75rem;
                margin-bottom: 2px;
            }

            .stat-number {
                font-size: var(--font-size-base);
            }

            .stat-label {
                font-size: 0.6rem;
            }

            .streak-number {
                font-size: var(--font-size-base);
            }

            .streak-label {
                font-size: 0.6rem;
            }

            .exercise-container {
                padding: var(--spacing-sm);
            }

            .exercise-type {
                flex-direction: column;
                gap: var(--spacing-xs);
                align-items: flex-start;
            }

            .question-text {
                padding: var(--spacing-sm);
                font-size: var(--font-size-sm);
            }

            .option-button {
                padding: var(--spacing-sm);
                gap: var(--spacing-xs);
            }

            .result-section {
                flex-direction: column;
                gap: var(--spacing-sm);
                padding: var(--spacing-sm);
            }

            .result-icon {
                align-self: center;
                font-size: 1.25rem;
            }
        }

        .fade-in {
            animation: fade-in 0.3s ease-out;
        }

        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <header class="app-header">
            <h1>Entrenador de Tiempos Pasados</h1>
            <p class="subtitle">Domina el pret√©rito e imperfecto en espa√±ol</p>
        </header>

        <main class="app-main">
            <div class="dashboard">
                <div class="card">
                    <h3>Progreso</h3>
                    <div class="progress-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="correct-count">0</div>
                            <div class="stat-label">Correctas</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="total-count">0</div>
                            <div class="stat-label">Total</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Racha</h3>
                    <div class="streak-display">
                        <div class="streak-number" id="streak-count">0</div>
                        <div class="streak-label">d√≠as</div>
                    </div>
                </div>
            </div>

            <div class="exercise-container fade-in" id="exercise-container">
                <!-- Exercise content will be loaded here -->
            </div>
        </main>

        <footer class="app-footer">
            <p>üí° Practica 5-10 minutos diarios para mejores resultados</p>
        </footer>
    </div>

    <script>
        // Spanish past tense exercises data
        const exercises = [
            // NIVEL F√ÅCIL - Acciones puntuales vs habituales
            {
                id: "preterite_vs_imperfect_01",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "easy",
                question: "Cuando era ni√±o, siempre _____ <span style='color: gray'>(ir)</span> al parque los domingos.",
                options: ["fui", "iba", "ir√©", "voy"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'iba' porque describe una acci√≥n habitual en el pasado (siempre los domingos).",
                tip: "El imperfecto describe acciones repetidas o habituales en el pasado. Palabras clave: siempre, todos los d√≠as, cada vez."
            },
            {
                id: "preterite_vs_imperfect_02",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "easy",
                question: "Ayer _____ <span style='color: gray'>(llamar)</span> a mi abuela por tel√©fono.",
                options: ["llamaba", "llam√©", "llamo", "llamar√©"],
                correctAnswer: 1,
                explanation: "Se usa el pret√©rito 'llam√©' porque es una acci√≥n espec√≠fica que ocurri√≥ ayer.",
                tip: "El pret√©rito se usa para acciones completadas en un momento espec√≠fico. Palabras clave: ayer, anoche, el lunes pasado."
            },
            {
                id: "preterite_vs_imperfect_03",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "easy",
                question: "Mientras _____ <span style='color: gray'>(ver)</span> la televisi√≥n, son√≥ el tel√©fono.",
                options: ["vi", "ve√≠a", "veo", "ver√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 've√≠a' porque describe una acci√≥n en progreso que fue interrumpida.",
                tip: "Mientras + imperfecto describe una acci√≥n en progreso. El pret√©rito interrumpe esa acci√≥n."
            },
            {
                id: "preterite_vs_imperfect_04",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "easy",
                question: "El a√±o pasado _____ <span style='color: gray'>(estudiar)</span> espa√±ol en la universidad.",
                options: ["estudiaba", "estudi√©", "estudio", "estudiar√©"],
                correctAnswer: 0,
                explanation: "Se usa el imperfecto 'estudiaba' porque describe una acci√≥n habitual durante todo el a√±o pasado.",
                tip: "Cuando hablamos de per√≠odos largos de tiempo, solemos usar el imperfecto."
            },
            {
                id: "preterite_vs_imperfect_05",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "easy",
                question: "De repente, _____ <span style='color: gray'>(escuchar)</span> una gran explosi√≥n.",
                options: ["escuchaba", "escuch√©", "escucho", "escuchar√©"],
                correctAnswer: 1,
                explanation: "Se usa el pret√©rito 'escuch√©' porque 'de repente' indica una acci√≥n s√∫bita y completada.",
                tip: "'De repente' siempre indica pret√©rito porque marca un momento espec√≠fico."
            },

            // NIVEL INTERMEDIO - Situaciones m√°s complejas
            {
                id: "preterite_vs_imperfect_06",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "medium",
                question: "Los ni√±os _____ <span style='color: gray'>(jugar)</span> en el jard√≠n cuando empez√≥ a llover.",
                options: ["jugaron", "jugaban", "juegan", "jugar√°n"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'jugaban' porque describe una acci√≥n en progreso que fue interrumpida por la lluvia.",
                tip: "Acci√≥n en progreso (imperfecto) + interrupci√≥n (pret√©rito) es un patr√≥n muy com√∫n."
            },
            {
                id: "preterite_vs_imperfect_07",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "medium",
                question: "Conoc√≠ a Mar√≠a cuando _____ <span style='color: gray'>(vivir)</span> en Madrid.",
                options: ["viv√≠", "viv√≠a", "vivo", "vivir√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'viv√≠a' porque describe las circunstancias (d√≥nde viv√≠a) cuando ocurri√≥ el evento (conocer a Mar√≠a).",
                tip: "El imperfecto establece el contexto o las circunstancias de una acci√≥n en pret√©rito."
            },
            {
                id: "preterite_vs_imperfect_08",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "medium",
                question: "Antes _____ <span style='color: gray'>(beber)</span> mucho caf√©, pero ahora solo bebo t√©.",
                options: ["beb√≠", "beb√≠a", "bebo", "beber√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'beb√≠a' porque contrasta un h√°bito pasado con la situaci√≥n actual.",
                tip: "'Antes' + imperfecto contrasta h√°bitos pasados con el presente."
            },
            {
                id: "preterite_vs_imperfect_09",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "medium",
                question: "_____ <span style='color: gray'>(ser)</span> las tres de la ma√±ana cuando llegaste.",
                options: ["Fueron", "Eran", "Son", "Ser√°n"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'eran' porque expresa la hora como contexto de otra acci√≥n.",
                tip: "La hora siempre se expresa en imperfecto cuando da contexto a otra acci√≥n."
            },
            {
                id: "preterite_vs_imperfect_10",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "medium",
                question: "No pude salir porque _____ <span style='color: gray'>(estar)</span> enfermo.",
                options: ["estuve", "estaba", "estoy", "estar√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'estaba' porque describe el estado (estar enfermo) que caus√≥ la imposibilidad de salir.",
                tip: "Estados o condiciones que explican por qu√© algo pas√≥ se expresan en imperfecto."
            },

            // NIVEL DIF√çCIL - Distinciones sutiles
            {
                id: "preterite_vs_imperfect_11",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "hard",
                question: "Durante la reuni√≥n, todos _____ <span style='color: gray'>(estar)</span> en silencio hasta que habl√≥ el director.",
                options: ["estuvieron", "estaban", "est√°n", "estar√°n"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'estaban' porque describe un estado continuo durante la reuni√≥n hasta que ocurri√≥ la interrupci√≥n.",
                tip: "Estados o situaciones continuas que duran hasta ser interrumpidas usan imperfecto."
            },
            {
                id: "preterite_vs_imperfect_12",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "hard",
                question: "Cuando era joven, _____ <span style='color: gray'>(correr)</span> todas las ma√±anas en el parque.",
                options: ["corr√≠", "corr√≠a", "corro", "correr√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'corr√≠a' porque describe una rutina habitual en el pasado (todas las ma√±anas).",
                tip: "Rutinas y h√°bitos pasados se expresan con imperfecto, incluso si se mencionan m√∫ltiples veces."
            },
            {
                id: "preterite_vs_imperfect_13",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "hard",
                question: "El ladr√≥n _____ <span style='color: gray'>(entrar)</span> por la ventana mientras la familia dorm√≠a.",
                options: ["entr√≥", "entraba", "entra", "entrar√°"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'entr√≥' porque es una acci√≥n espec√≠fica y completada, aunque ocurri√≥ durante otra acci√≥n continua.",
                tip: "Acciones espec√≠ficas y completadas van en pret√©rito, incluso si ocurren durante situaciones descritas en imperfecto."
            },
            {
                id: "preterite_vs_imperfect_14",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "hard",
                question: "No sab√≠a que t√∫ _____ <span style='color: gray'>(hablar)</span> franc√©s tan bien.",
                options: ["hablaste", "hablabas", "hablas", "hablar√°s"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'hablabas' porque describe una habilidad o caracter√≠stica continua en el pasado.",
                tip: "Habilidades, caracter√≠sticas o conocimientos en el pasado se expresan en imperfecto."
            },
            {
                id: "preterite_vs_imperfect_15",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "hard",
                question: "Despu√©s de que _____ <span style='color: gray'>(terminar)</span> el examen, me sent√≠ muy aliviado.",
                options: ["termin√©", "terminaba", "termino", "terminar√©"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'termin√©' porque 'despu√©s de que' indica una secuencia de acciones completadas.",
                tip: "'Despu√©s de que' introduce acciones completadas que van en pret√©rito."
            },

            // EJERCICIOS CON VERBOS IRREGULARES COMUNES
            {
                id: "irregular_verbs_01",
                type: "Verbos Irregulares",
                difficulty: "medium",
                question: "Ayer no _____ <span style='color: gray'>(tener)</span> tiempo para estudiar.",
                options: ["tuve", "ten√≠a", "tengo", "tendr√©"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'tuve' porque se refiere a una situaci√≥n espec√≠fica de ayer.",
                tip: "El verbo 'tener' es irregular en pret√©rito: tuve, tuviste, tuvo, tuvimos, tuvisteis, tuvieron."
            },
            {
                id: "irregular_verbs_02",
                type: "Verbos Irregulares",
                difficulty: "medium",
                question: "No _____ <span style='color: gray'>(saber)</span> qu√© hacer en esa situaci√≥n.",
                options: ["supe", "sab√≠a", "s√©", "sabr√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'sab√≠a' porque describe un estado mental continuo en el pasado.",
                tip: "'Saber' en imperfecto describe conocimiento continuo. En pret√©rito ('supe') indica el momento de enterarse."
            },
            {
                id: "irregular_verbs_03",
                type: "Verbos Irregulares",
                difficulty: "hard",
                question: "Cuando _____ <span style='color: gray'>(saber)</span> la noticia, no lo pod√≠a creer.",
                options: ["supe", "sab√≠a", "s√©", "sabr√©"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'supe' porque indica el momento espec√≠fico en que se enter√≥ de la noticia.",
                tip: "'Saber' en pret√©rito significa 'enterarse' o 'descubrir' en un momento espec√≠fico."
            },
            {
                id: "irregular_verbs_04",
                type: "Verbos Irregulares",
                difficulty: "medium",
                question: "Los invitados _____ <span style='color: gray'>(venir)</span> a las ocho en punto.",
                options: ["vinieron", "ven√≠an", "vienen", "vendr√°n"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'vinieron' porque indica una acci√≥n completada en un momento espec√≠fico.",
                tip: "'Venir' es irregular en pret√©rito: vine, viniste, vino, vinimos, vinisteis, vinieron."
            },
            {
                id: "irregular_verbs_05",
                type: "Verbos Irregulares",
                difficulty: "hard",
                question: "No _____ <span style='color: gray'>(poder)</span> dormir anoche por el ruido.",
                options: ["pude", "pod√≠a", "puedo", "podr√©"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'pude' porque se refiere a una situaci√≥n espec√≠fica de anoche.",
                tip: "'Poder' en pret√©rito indica capacidad/incapacidad en una situaci√≥n espec√≠fica."
            },

            // EJERCICIOS ADICIONALES - ACCIONES HABITUALES VS PUNTUALES
            {
                id: "preterite_vs_imperfect_16",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "easy",
                question: "Cada verano _____ <span style='color: gray'>(ir)</span> a la playa con mi familia.",
                options: ["fui", "iba", "voy", "ir√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'iba' porque 'cada verano' indica una acci√≥n habitual repetida.",
                tip: "'Cada' + per√≠odo de tiempo siempre indica imperfecto para acciones habituales."
            },
            {
                id: "preterite_vs_imperfect_17",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "easy",
                question: "Anoche _____ <span style='color: gray'>(ver)</span> una pel√≠cula muy interesante.",
                options: ["ve√≠a", "vi", "veo", "ver√©"],
                correctAnswer: 1,
                explanation: "Se usa el pret√©rito 'vi' porque se refiere a una acci√≥n espec√≠fica completada anoche.",
                tip: "Anoche + acci√≥n espec√≠fica = pret√©rito."
            },
            {
                id: "preterite_vs_imperfect_18",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "easy",
                question: "Cuando ten√≠a 10 a√±os, _____ <span style='color: gray'>(montar)</span> en bicicleta todos los d√≠as.",
                options: ["mont√©", "montaba", "monto", "montar√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'montaba' porque describe una actividad habitual en el pasado (todos los d√≠as).",
                tip: "Edad + actividad habitual = imperfecto."
            },
            {
                id: "preterite_vs_imperfect_19",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "medium",
                question: "_____ <span style='color: gray'>(estar)</span> muy cansado cuando llegu√© a casa.",
                options: ["Estuve", "Estaba", "Estoy", "Estar√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'estaba' porque describe el estado en que se encontraba al llegar.",
                tip: "Estados o condiciones que describen circunstancias van en imperfecto."
            },
            {
                id: "preterite_vs_imperfect_20",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "medium",
                question: "El tel√©fono _____ <span style='color: gray'>(sonar)</span> cuando estaba en la ducha.",
                options: ["son√≥", "sonaba", "suena", "sonar√°"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'son√≥' porque es una acci√≥n espec√≠fica que interrumpi√≥ otra acci√≥n en progreso.",
                tip: "Acci√≥n que interrumpe = pret√©rito, acci√≥n interrumpida = imperfecto."
            },
            {
                id: "preterite_vs_imperfect_21",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "medium",
                question: "Todos los mi√©rcoles _____ <span style='color: gray'>(ir)</span> al gimnasio despu√©s del trabajo.",
                options: ["fui", "iba", "voy", "ir√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'iba' porque describe una rutina habitual (todos los mi√©rcoles).",
                tip: "Rutinas semanales o peri√≥dicas se expresan en imperfecto."
            },
            {
                id: "preterite_vs_imperfect_22",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "hard",
                question: "Mi hermana _____ <span style='color: gray'>(ser)</span> doctora cuando la conociste.",
                options: ["fue", "era", "es", "ser√°"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'era' porque describe su profesi√≥n como caracter√≠stica continua en el pasado.",
                tip: "Profesiones y caracter√≠sticas permanentes en el pasado van en imperfecto."
            },
            {
                id: "preterite_vs_imperfect_23",
                type: "Pret√©rito vs Imperfecto",
                difficulty: "hard",
                question: "De ni√±o, _____ <span style='color: gray'>(ser)</span> muy t√≠mido, pero un d√≠a decid√≠ cambiar.",
                options: ["fui", "era", "soy", "ser√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'era' porque describe una caracter√≠stica continua de la personalidad en el pasado.",
                tip: "Caracter√≠sticas de personalidad o f√≠sicas en el pasado usan imperfecto."
            },

            // VERBOS IRREGULARES ADICIONALES
            {
                id: "irregular_verbs_06",
                type: "Verbos Irregulares",
                difficulty: "medium",
                question: "Ayer _____ <span style='color: gray'>(tener)</span> que estudiar toda la noche.",
                options: ["tuve", "ten√≠a", "tengo", "tendr√©"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'tuve' porque se refiere a una obligaci√≥n espec√≠fica de ayer.",
                tip: "Obligaciones espec√≠ficas en el pasado van en pret√©rito."
            },
            {
                id: "irregular_verbs_07",
                type: "Verbos Irregulares",
                difficulty: "medium",
                question: "En aquella √©poca, no _____ <span style='color: gray'>(saber)</span> usar computadoras.",
                options: ["supe", "sab√≠a", "s√©", "sabr√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'sab√≠a' porque describe una falta de conocimiento continua en el pasado.",
                tip: "Conocimientos o habilidades continuas en el pasado van en imperfecto."
            },
            {
                id: "irregular_verbs_08",
                type: "Verbos Irregulares",
                difficulty: "hard",
                question: "_____ <span style='color: gray'>(venir)</span> a verte tan pronto como recib√≠ tu mensaje.",
                options: ["Vine", "Ven√≠a", "Vengo", "Vendr√©"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'vine' porque es una acci√≥n espec√≠fica en respuesta al mensaje.",
                tip: "Acciones espec√≠ficas en respuesta a eventos van en pret√©rito."
            },
            {
                id: "irregular_verbs_09",
                type: "Verbos Irregulares",
                difficulty: "medium",
                question: "Antes _____ <span style='color: gray'>(poder)</span> caminar al trabajo, pero ahora manejo.",
                options: ["pude", "pod√≠a", "puedo", "podr√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'pod√≠a' porque describe una capacidad habitual en el pasado.",
                tip: "Capacidades o habilidades habituales en el pasado van en imperfecto."
            },
            {
                id: "irregular_verbs_10",
                type: "Verbos Irregulares",
                difficulty: "hard",
                question: "Cuando _____ <span style='color: gray'>(saber)</span> la verdad, me sent√≠ muy triste.",
                options: ["supe", "sab√≠a", "s√©", "sabr√©"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'supe' porque indica el momento espec√≠fico de enterarse de la verdad.",
                tip: "'Saber' en pret√©rito = enterarse/descubrir en un momento espec√≠fico."
            },

            // EJERCICIOS CON DESCRIPCIONES Y NARRACIONES
            {
                id: "descriptions_01",
                type: "Descripciones",
                difficulty: "medium",
                question: "La casa _____ <span style='color: gray'>(ser)</span> muy grande y ten√≠a un jard√≠n hermoso.",
                options: ["fue", "era", "es", "ser√°"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'era' porque describe las caracter√≠sticas de la casa en el pasado.",
                tip: "Descripciones f√≠sicas y caracter√≠sticas van en imperfecto."
            },
            {
                id: "descriptions_02",
                type: "Descripciones",
                difficulty: "medium",
                question: "Hac√≠a mucho calor cuando _____ <span style='color: gray'>(salir)</span> de la oficina.",
                options: ["sal√≠", "sal√≠a", "salgo", "saldr√©"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'sal√≠' porque es una acci√≥n espec√≠fica, mientras que 'hac√≠a calor' describe las condiciones.",
                tip: "Condiciones clim√°ticas (imperfecto) + acci√≥n espec√≠fica (pret√©rito)."
            },
            {
                id: "descriptions_03",
                type: "Descripciones",
                difficulty: "hard",
                question: "El restaurante _____ <span style='color: gray'>(estar)</span> lleno cuando llegamos.",
                options: ["estuvo", "estaba", "est√°", "estar√°"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'estaba' porque describe el estado del restaurante en el momento de llegar.",
                tip: "Estados y condiciones como contexto de otras acciones van en imperfecto."
            },

            // EJERCICIOS DE TIEMPO Y FRECUENCIA
            {
                id: "time_frequency_01",
                type: "Tiempo y Frecuencia",
                difficulty: "easy",
                question: "A menudo _____ <span style='color: gray'>(desayunar)</span> en ese caf√© cuando viv√≠a cerca.",
                options: ["desayun√©", "desayunaba", "desayuno", "desayunar√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'desayunaba' porque 'a menudo' indica una acci√≥n habitual.",
                tip: "'A menudo', 'frecuentemente', 'normalmente' indican imperfecto."
            },
            {
                id: "time_frequency_02",
                type: "Tiempo y Frecuencia",
                difficulty: "medium",
                question: "Una vez _____ <span style='color: gray'>(ver)</span> un accidente muy grave en esa esquina.",
                options: ["vi", "ve√≠a", "veo", "ver√©"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'vi' porque 'una vez' indica una acci√≥n espec√≠fica y √∫nica.",
                tip: "'Una vez' siempre indica pret√©rito para acciones espec√≠ficas."
            },
            {
                id: "time_frequency_03",
                type: "Tiempo y Frecuencia",
                difficulty: "hard",
                question: "Durante mi infancia, _____ <span style='color: gray'>(leer)</span> muchos cuentos antes de dormir.",
                options: ["le√≠", "le√≠a", "leo", "leer√©"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'le√≠a' porque describe una actividad habitual durante un per√≠odo largo.",
                tip: "'Durante' + per√≠odo de tiempo + actividad habitual = imperfecto."
            },

            // EJERCICIOS DE SECUENCIAS Y CAUSAS
            {
                id: "sequences_01",
                type: "Secuencias",
                difficulty: "medium",
                question: "Primero _____ <span style='color: gray'>(terminar)</span> la tarea, luego sal√≠ a jugar.",
                options: ["termin√©", "terminaba", "termino", "terminar√©"],
                correctAnswer: 0,
                explanation: "Se usa el pret√©rito 'termin√©' porque 'primero' indica una secuencia de acciones completadas.",
                tip: "Secuencias de acciones (primero, luego, despu√©s) van en pret√©rito."
            },
            {
                id: "sequences_02",
                type: "Secuencias",
                difficulty: "hard",
                question: "Como _____ <span style='color: gray'>(haber)</span> lluvia, decidimos quedarnos en casa.",
                options: ["hubo", "hab√≠a", "hay", "habr√°"],
                correctAnswer: 1,
                explanation: "Se usa el imperfecto 'hab√≠a' porque describe la condici√≥n (lluvia) que caus√≥ la decisi√≥n.",
                tip: "Condiciones que explican decisiones o acciones van en imperfecto."
            }
        ];

        // App state
        let currentExerciseIndex = 0;
        let currentExercise = null;
        let selectedAnswer = null;
        let showResult = false;
        let correctCount = 0;
        let totalCount = 0;
        let streak = 0;

        // Load saved progress
        function loadProgress() {
            const saved = localStorage.getItem('langlearn_progress');
            if (saved) {
                const data = JSON.parse(saved);
                correctCount = data.correct || 0;
                totalCount = data.total || 0;
                streak = data.streak || 0;
            }
            updateProgressDisplay();
        }

        // Save progress
        function saveProgress() {
            const data = {
                correct: correctCount,
                total: totalCount,
                streak: streak
            };
            localStorage.setItem('langlearn_progress', JSON.stringify(data));
        }

        // Update progress display
        function updateProgressDisplay() {
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('total-count').textContent = totalCount;
            document.getElementById('streak-count').textContent = streak;
        }

        // Shuffle array function
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Get next exercise with shuffled options
        function getNextExercise() {
            const baseExercise = exercises[currentExerciseIndex % exercises.length];
            
            // Create array of options with their original indices
            const optionsWithIndices = baseExercise.options.map((option, index) => ({
                text: option,
                originalIndex: index
            }));
            
            // Shuffle the options
            const shuffledOptions = shuffleArray(optionsWithIndices);
            
            // Find where the correct answer ended up
            const newCorrectAnswer = shuffledOptions.findIndex(
                option => option.originalIndex === baseExercise.correctAnswer
            );
            
            // Return exercise with shuffled options
            return {
                ...baseExercise,
                options: shuffledOptions.map(option => option.text),
                correctAnswer: newCorrectAnswer
            };
        }

        // Render exercise
        function renderExercise(exercise) {
            const container = document.getElementById('exercise-container');
            
            const difficultyEmoji = {
                'easy': 'üü¢ F√°cil',
                'medium': 'üü° Intermedio',
                'hard': 'üî¥ Dif√≠cil'
            };

            container.innerHTML = `
                <div class="exercise-header">
                    <div class="exercise-type">
                        <span class="type-badge">${exercise.type}</span>
                        <span class="difficulty">${difficultyEmoji[exercise.difficulty]}</span>
                    </div>
                </div>

                <div class="question-section">
                    <h2 class="question-title">Completa la oraci√≥n:</h2>
                    <p class="question-text">${exercise.question}</p>
                </div>

                <div class="options-section" id="options-section">
                    ${exercise.options.map((option, index) => `
                        <button class="option-button" onclick="selectAnswer(${index})">
                            <span class="option-letter">${String.fromCharCode(65 + index)}</span>
                            <span class="option-text">${option}</span>
                        </button>
                    `).join('')}
                </div>

                <div id="result-section" style="display: none;"></div>
            `;
        }

        // Select answer
        function selectAnswer(optionIndex) {
            if (showResult) return;

            selectedAnswer = optionIndex;
            const isCorrect = optionIndex === currentExercise.correctAnswer;
            
            // Update stats
            totalCount++;
            if (isCorrect) {
                correctCount++;
                const today = new Date().toDateString();
                const lastCompleted = localStorage.getItem('langlearn_last_completed');
                if (lastCompleted !== today) {
                    streak++;
                    localStorage.setItem('langlearn_last_completed', today);
                }
            }
            
            saveProgress();
            updateProgressDisplay();
            showResult = true;

            // Update option styles
            const options = document.querySelectorAll('.option-button');
            options.forEach((button, index) => {
                if (index === currentExercise.correctAnswer) {
                    button.classList.add('correct');
                } else if (index === selectedAnswer && !isCorrect) {
                    button.classList.add('incorrect');
                }
                button.style.pointerEvents = 'none';
            });

            // Show result
            showExerciseResult(isCorrect);
        }

        // Show exercise result
        function showExerciseResult(isCorrect) {
            const resultSection = document.getElementById('result-section');
            resultSection.style.display = 'flex';
            resultSection.className = `result-section ${isCorrect ? 'correct' : 'incorrect'}`;
            
            resultSection.innerHTML = `
                <div class="result-icon">${isCorrect ? '‚úÖ' : '‚ùå'}</div>
                <div class="result-content">
                    <h3 class="result-title">${isCorrect ? '¬°Correcto!' : 'Incorrecto'}</h3>
                    <p class="result-explanation">${currentExercise.explanation}</p>
                    ${currentExercise.tip ? `
                        <div class="tip">
                            <p class="tip-label">üí° Consejo:</p>
                            <p class="tip-text">${currentExercise.tip}</p>
                        </div>
                    ` : ''}
                    <button onclick="nextExercise()" style="
                        margin-top: var(--spacing-md);
                        padding: var(--spacing-sm) var(--spacing-lg);
                        background: var(--primary-color);
                        color: white;
                        border: none;
                        border-radius: 6px;
                        cursor: pointer;
                        font-size: var(--font-size-base);
                        font-weight: 500;
                        transition: background var(--transition-base);
                    " onmouseover="this.style.background='var(--primary-dark)'" onmouseout="this.style.background='var(--primary-color)'">
                        Continuar ‚Üµ
                    </button>
                </div>
            `;
        }

        // Next exercise
        function nextExercise() {
            currentExerciseIndex++;
            currentExercise = getNextExercise();
            selectedAnswer = null;
            showResult = false;
            
            renderExercise(currentExercise);
            document.getElementById('exercise-container').classList.add('fade-in');
        }

        // Initialize app
        function initApp() {
            // Show loading first
            const container = document.getElementById('exercise-container');
            container.innerHTML = '<div class="loading"><p>Cargando ejercicio...</p></div>';
            
            // Small delay to show loading, then load exercise
            setTimeout(() => {
                loadProgress();
                currentExercise = getNextExercise();
                renderExercise(currentExercise);
            }, 100);
        }

        // Keyboard event handler
        function handleKeyPress(event) {
            // If showing results, allow Enter/Space to continue
            if (showResult && (event.code === 'Enter' || event.code === 'Space')) {
                event.preventDefault(); // Prevent default space scrolling
                nextExercise();
                return;
            }
            
            // If not showing results, allow only A-D keys to select answers
            if (!showResult && currentExercise) {
                const key = event.key.toLowerCase();
                // Only allow a, b, c, d keys - no other keys
                if (key === 'a' || key === 'b' || key === 'c' || key === 'd') {
                    event.preventDefault();
                    const optionIndex = key.charCodeAt(0) - 'a'.charCodeAt(0);
                    if (optionIndex < currentExercise.options.length) {
                        selectAnswer(optionIndex);
                    }
                }
            }
        }

        // Start the app when page loads
        document.addEventListener('DOMContentLoaded', initApp);
        
        // Add keyboard event listeners
        document.addEventListener('keydown', handleKeyPress);
    </script>
</body>
</html>